<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc.xsd">
      
      
      
      <!-- 自定义格式转换器 -->
    <bean id="myConversionService" class="org.springframework.context.support.ConversionServiceFactoryBean">
      <property name="converters">
      <list>
      <bean class="com.t226.tools.StringToDateConverter"><!-- class为自定义转换器路径 -->
      <constructor-arg type="java.lang.String" value="yyyy-MM-dd"><!-- 进行构造注入 -->
      
      </constructor-arg>
      </bean>
      </list>
      </property>
      </bean>


 

      
        
        <!--配置处理器映射 HandlerMapping  -->
       <!--  <bean name="/index.html" class="com.t226.controller.IndexController"></bean> --><!-- 交给这个类进行处理 -->
       <mvc:annotation-driven><!--conversion-service引用自定义格式转换器  -->
           <mvc:message-converters>
          <bean class="org.springframework.http.converter.StringHttpMessageConverter">
       	<property name="supportedMediaTypes">
       	<list>
       	<value>text/html;charset=UTF-8</value><!-- 解决ajax中文乱码  text/html;charset=UTF-8 or application/json;charset=UTF-8 -->
       	</list>
       	</property>
       </bean>
       
    	<!--<bean class="com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter">&lt;!&ndash;在处理ajax请求时会自动把返回的Object进行转换成json&ndash;&gt;
    	<property name="supportedMediaTypes">
    	<list>
    	<value>text/html;charset=UTF-8</value>&lt;!&ndash; 进行配置时间格式 &ndash;&gt;
    	<value>application/json</value>
    	</list>
    	</property>
    	<property name="features">
    	<list>
               <value>WriteDateUseDateFormat</value>&lt;!&ndash; FastJSON消息转换器, &ndash;&gt;
           </list>
           </property>
       </bean>-->

</mvc:message-converters>
       </mvc:annotation-driven>


        
        
        
        
        
        <!-- 配置多视图解析器:允许同意的内容数据呈现不同的view -->    
    <bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
    <property name="favorParameter" value="true"></property><!-- 支持参数匹配 -->
    <property name="mediaTypes"><!-- 设置展示格式 -->
    <map>
    <entry key="html" value="text/html;charset=UTF-8"></entry>
    <entry key="json" value="application/json;charset=UTF-8"></entry>
    <entry key="xml" value="application/xml;charset=UTF-8"></entry>
    </map>
    </property>
    <property name="viewResolvers">
    <list>
    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/jsp/"></property>
        <property name="suffix" value=".jsp"></property>
        </bean>
    </list>
    </property>
    </bean>
        
        
        <!-- 配置视图解析器 -->
    <!--     <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/jsp/"></property>
        <property name="suffix" value=".jsp"></property>
        </bean> -->
        
        <!--扫描包下的注解  -->
        <context:component-scan base-package="com.t226.controller"/>
       
        <mvc:resources location="/statics/" mapping="/statics/**"></mvc:resources><!-- 扫描指定目录下的文件可用 -->
        
        <!-- 全局异常配置 errorLgoin-->
        <bean class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver">
			<!--<property name="exceptionMappings">
			<props>
			<prop key="java.lang.RuntimeException">errorLgoin</prop>&lt;!&ndash; 逻辑视图名&ndash;&gt;
			</props>
			</property>-->
            <property name="exceptionMappings">
                <props>
                    <prop key="java.lang.Exception">error</prop>
                    <prop key="java.lang.Throwable">error</prop>
                </props>
            </property>
        </bean>


        <!--配置MultipartResolver,用于文件上传 -->
	<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
	<property name="maxUploadSize" value="5000000"></property><!-- 上传文件大小限制 -->
	<property name="defaultEncoding" value="UTF-8"></property>
	</bean>
        
<mvc:interceptors><!--拦截器 -->
	<mvc:interceptor>
		<mvc:mapping path="/user/**"/>
		<bean class="com.t226.interceptor.SysInterceptor"></bean>
	</mvc:interceptor>

</mvc:interceptors>
        
        
        </beans>