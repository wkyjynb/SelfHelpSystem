<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.t226.dao.user.UserMapper">

<insert id="affairAddUser"><!--添加用户-->
INSERT security_user (password,phone)VALUE
(#{password},#{phone})
</insert>

    <select id="userLogin" resultType="User">
        SELECT * FROM security_user where phone=#{phone} AND userType=0
    </select>
    <select id="dologin" resultType="User">
        SELECT * FROM security_user where phone=#{userCode} AND userType=1
    </select>
    <insert id="doInsert">
		insert into detection(temperature,humidity,smoke,date)value(#{temperature},#{humidity},#{smoke},#{date});
	</insert>
    <select id="finSelect" resultType="Detection">
		select * from detection;
	</select>
    <select id="finCount" resultType="map">
		select sum(temperature)/count(*) as temperature,sum(humidity)/count(*) as humidity,(SELECT COUNT(1) from detection where #{date}>date AND date>#{date1} AND smoke=1) as smoke,(SELECT COUNT(1) from detection where #{date}>date AND date>#{date1} AND smoke=0) as smoke1  from detection WHERE #{date}>date AND date>#{date1};
	</select>
</mapper>